{%  extends 'detection/main.html' %}

{% block content %}

{% load event_tags %}
{% load static %}

<div class="limiter">
<div class="container-login100 p-b-0 p-t-0">
	<div class="wrap-login100 p-l-30 p-r-30 p-t-20 p-b-20">
		<div class="Search">
			<form method="get">
				<div class="row">

					<div class="col">
						<!-- Location Input -->
						<input class="form-control" type="text"  placeholder="Location"
						name="{{ myFilter.form.location.name }}"
						id="{{ myFilter.form.location.id_for_label }}"
						{% if myFilter.form.location.value != None %}value="{{ myFilter.form.location.value|stringformat:'s' }}"{% endif %}
						maxlength="{{ myFilter.form.location.field.max_length }}"
						{% if myFilter.form.location.field.required %}required{% endif %}>
					</div>

					<div class="col">
						<!-- Alert was sent to Input -->
						<input class="form-control" type="text"  placeholder="Alert was sent to"
						name="{{ myFilter.form.alertReceiver.name }}"
						id="{{ myFilter.form.alertReceiver.id_for_label }}"
						{% if myFilter.form.alertReceiver.value != None %}value="{{ myFilter.form.alertReceiver.value|stringformat:'s' }}"{% endif %}
						maxlength="{{ myFilter.form.alertReceiver.field.max_length }}"
						{% if myFilter.form.alertReceiver.field.required %}required{% endif %}>
					</div>

					<div class="col-2">
						<!-- Start Date Input -->
						<input class="form-control" type="text" id="date" placeholder="Start Date" autocomplete="off"
						name="{{ myFilter.form.startDate.name }}"
						id="{{ myFilter.form.startDate.id_for_label }}"
						{% if myFilter.form.startDate.value != None %}value="{{ myFilter.form.startDate.value|stringformat:'s' }}"{% endif %}
						maxlength="{{ myFilter.form.startDate.field.max_length }}"
						{% if myFilter.form.startDate.field.required %}required{% endif %}>
					</div>

					<div class="col-2">
						<!-- End Date Input Input -->
						<input class="form-control" type="text" id="date" placeholder="End Date" autocomplete="off"
						name="{{ myFilter.form.endDate.name }}"
						id="{{ myFilter.form.endDate.id_for_label }}"
						{% if myFilter.form.endDate.value != None %}value="{{ myFilter.form.endDate.value|stringformat:'s' }}"{% endif %}
						maxlength="{{ myFilter.form.endDate.field.max_length }}"
						{% if myFilter.form.endDate.field.required %}required{% endif %}>
					</div>

					<div class="col-1">
						<button class="btn btn-primary" type="submit">Search</button>
					</div>
				  </div>
			</form>
		</div>
		
</div>
</div>
</div>

   <script>
	jQuery(document).ready(function($){
	  var date_input=$('input[id="date"]');
	  var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
	  var options={
		format: 'yyyy-mm-dd',
		container: container,
		todayHighlight: true,
		autoclose: true,
	  };
	  date_input.datepicker(options);
	});
	</script>
	
<div class="limiter">
<div class="container-login100 p-t-0">
	<div class="wrap-login100 p-l-40 p-r-40 p-t-25 p-b-15">
		
		<table class="table table-image">
			<tr>
				<th scope="col" class="top-row">Detection</th>
				<th scope="col" class="top-row">Location</th>
				<th scope="col" class="top-row">Alert was sent to</th>
				<th scope="col" class="top-row">Time</th>
				<th scope="col" class="top-row">Alert</th>
			</tr>

			{% for alert in uploadAlert %}

			<tr>
				<td class="w-25"><img style="max-width: 250px; max-height: 150x; border-radius: 2.5%;" 
					class="img-fluid" src='{{ alert.image.url }}'/></td>
				<td>{{alert.location}}</td>
				<td>{{alert.alertReceiver}}</td>
				<td>{{alert.dateCreated|date:"Y-m-d H:i:s"}}</td>
				
				{% with uuid=alert.image|split:"." %}

				<td><a class="btn btn-sm btn-info" href="/alert/{{uuid.0}}">View</a></td>

				{% endwith %}
				
			</tr>
			{% endfor %}

		</table>
	
	</div>
</div>
</div>

{% endblock %}